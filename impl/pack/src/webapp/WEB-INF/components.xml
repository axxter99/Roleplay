<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
	"http://www.springframework.org/dtd/spring-beans.dtd">

<!-- This file generated by Sakai App Builder -AZ -->
<beans>

	<!-- Bring in the HBM related beans beans -->
	<import resource="hibernate-hbms.xml" />

	<!-- Bring in the hibernate related beans -->
	<import resource="spring-hibernate.xml" />

	<!-- create a logic bean, give it the dao from above and some sakai services -->
	<bean id="org.sakaiproject.useralias.logic.UserAliasLogic"
			class="org.sakaiproject.useralias.logic.impl.UserAliasLogicImpl"
			init-method="init"
			depends-on="org.sakaiproject.useralias.siteCache,org.sakaiproject.useralias.itemCache">
		<property name="dao" 
			ref="org.sakaiproject.useralias.dao.UserAliasDao" />
		<property name="developerHelperService" ref="org.sakaiproject.entitybroker.DeveloperHelperService"/>
        <property name="memoryService">
            <ref bean="org.sakaiproject.memory.api.MemoryService"/>
        </property>

	</bean>
	
	<!-- Enable it as the default contextual user display service in Sakai. -->
	<alias name="org.sakaiproject.useralias.logic.UserAliasLogic" alias="org.sakaiproject.user.api.ContextualUserDisplayService"/>

    <!-- defaults for cache -->
    <bean id="org.sakaiproject.useralias.siteCache"
          class="org.springframework.cache.ehcache.EhCacheFactoryBean">
       <property name="cacheManager">
           <ref bean="org.sakaiproject.memory.api.MemoryService.cacheManager"/>
       </property>
       <property name="cacheName" value="org.sakaiproject.useralias.siteCache"/>
       <property name="maxElementsInMemory" value="10000"/>
       <property name="timeToIdle" value="7200"/>
       <property name="timeToLive" value="7200"/>
       <property name="overflowToDisk" value="false" />
    </bean>

 <bean id="org.sakaiproject.useralias.itemCache"
          class="org.springframework.cache.ehcache.EhCacheFactoryBean">
       <property name="cacheManager">
           <ref bean="org.sakaiproject.memory.api.MemoryService.cacheManager"/>
       </property>
       <property name="cacheName" value="org.sakaiproject.useralias.itemCache"/>
       <property name="maxElementsInMemory" value="10000"/>
       <property name="timeToIdle" value="7200"/>
       <property name="timeToLive" value="7200"/>
       <property name="overflowToDisk" value="false" />
    </bean>

</beans>
